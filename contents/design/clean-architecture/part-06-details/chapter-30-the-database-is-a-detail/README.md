# THE DATABASE IS A DETAIL

아키텍처 관점에서 볼 때 데이터베이스는 엔티티가 아니다. 즉, 데이터베이스는 세부사항이라서 아키텍처의 컴포넌트 수준으로 끌어올릴 수 없다. 데이터베이스는 데이터에 접근할 방법을 제공하는 유틸리티다. 이는 저수준의
세부사항(메커니즘)일 뿐이라서 아키텍처와는 관련이 없다.

## 관계형 데이터베이스

관계형 데이터베이스의 기술이 얼마나 뛰어나고 유용하던 그저 기술일 뿐이다. 이는 관계형 데이터베이스가 세부사항임을 뜻한다. 관계형 테이블은 특정 형식의 데이터에 접근하는 경우에는 편리하지만, 데이터를 테이블에 행
단위로 배치한다는 자체는 아키텍처적으로 볼 때 전혀 중요하지 않다. 애플리케이션의 유스케이스는 이러한 방식을 알아서는 안 되며 관여해서도 안 된다.

많은 데이터 접근 프레임워크가 테이블과 행이 객체 형태로 시스템 여기저기에서 돌아다니게 허용하는데, 아키텍처적으로 잘못된 설계이다. 이렇게 되며 유스케이스, 업무 규칙, UI 조차도 관계형 데이터 구조에 결합되어
버린다.

## 데이터베이스 시스템은 왜 이렇게 널리 사용되는가?

데이터를 저장하는 속도가 느린 디스크 때문에 이를 완화하기 위해 색인, 캐시, 쿼리 계획 최적화가 필요해졌다. 그리고 이러한 색인, 캐시, 쿼리 계획에서 작업중인 대상이 어떤 데이터인지 알 수 있어야 했기 때문에,
데이터를 표현하는 표준적인 방식이 필요했다. 시간이 지나면서 이러한 시스템은 뚜렷이 구분되는 두 가지 유형으로 분리되었다. 하나는 파일 시스템이었고, 다른 하나는 관계형 데이터베이스 관리 시스템(RDBMS)이었다.

* 파일 시스템: 문서 전체를 자연스럽고 편리하게 저장하는 방법을 제공한다. 문서를 이름 기준으로 저장하거나 조회할 때 잘 동작하지만, 내용을 기준으로 검색할 때는 크게 도움되지 않는다.
* 데이터베이스 시스템: 내용 기반으로 레코드를 자연스럽고 편리하게 찾는 방법을 제공한다. 정형화되지 않은 문서를 저장하고 검색하는 데는 부적합하다.

이 두 시스템은 데이터를 디스크에 체계화해서, 각 시스템에 특화된 방식으로 접근해야 할 때 가능한 한 효율적으로 데이터를 저장하고 검색할 수 있도록 한다.

## 디스크가 없다면 어떻게 될까?

이제 디스크는 소멸 중인 부품이다. 머지 않아 디스크는 RAM으로 대체될 것이다. 모든 데이터가 RAM에 저장된다면 데이터들을 연결 리스트, 트리, 해시 테이블, 스택, 큐 등의 데이터 구조로 체계화될 것이며,
데이터베이스에 접근할 때는 포인터나 참조를 사용할 것이다.

데이터가 파일 시스템이나 데이터베이스에 있더라도, RAM으로 읽은 후 다루기 편한 형태로 구조를 변경해 사용한다.

## 세부사항

데이터베이스가 세부사항이라고 말하는 이유는 이러한 부분들 때문이다. 데이터베이스는 메커니즘에 불과하며, 디스크 표면과 RAM 사이에서 데이터를 옮길 때 사용할 뿐이다. 따라서 아키텍처 관점에서 보면 디스크에 데이터가
있기만 한다면, 데이터가 어떤 형태인지는 절대로 신경써서는 안 된다.

## 하지만 성능은?

데이터 저장소 측면에서 성능은 완전히 캡슐화하여 업무 규칙과는 분리할 수 있는 관심사다. 데이터 저장소에 데이터를 빠르게 넣고 뺄 수 있어야 하지만, 이는 저수준의 관심사다. 따라서 성능은 시스템의 전반적인
아키텍처와는 아무런 관련이 없다.

## 결론

체계화된 데이터 구조와 데이터 모델은 아키텍처적으로 중요하지만, 데이터를 디스크 표면에서 이리저리 옮길 뿐인 데이터베이스는 세부사항이다.
